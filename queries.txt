create table hotel(hotel_id varchar2(4) primary key,city varchar2(10),hotel_name varchar2(20),address varchar2(25),description varchar2(50),avg_rate_per_night number(10,2),phone_no1 varchar2(10),phone_no2 varchar2(10),rating varchar2(4),email varchar2(15),fax varchar2(15)));

create table roomdetails(hotel_id varchar2(4),room_id varchar2(4) primary key,room_no varchar2(3),room_type varchar2(40),per_night_rate number(10,2),availability varchar2(20),constraint fk_hotel_id foreign key(hotel_id) references hotel(hotel_id) on delete cascade,constraint chk_room_type check(room_type in ('Standard non A/C room','Standard A/C room','Exceutive A/C room','Deluxe A/C room')));

create table BookingDetails(booking_id varchar2(4),room_id varchar2(4),user_id varchar2(4),booked_from date,booked_to date,no_of_adults number,no_of_children number,amount number(10,2),constraint fk_room_id foreign key(room_id) references roomdetails(room_id) on delete cascade,constraint fk_user_id foreign key(user_id) references users(user_id) on delete cascade);

create table users(user_id varchar2(4) primary key,password varchar2(7),role varchar2(10),user_name varchar2(20),mobile_no varchar2(10),phone varchar2(10),address varchar2(25),email varchar2(15) on delete cascade);




------------------------------
Logger 

PropertyConfigurator.configure("resources/log4j.properties");
		Logger myLogger =  Logger.getLogger(DatabaseImpl.class.getName());



log4j.properties

---------
log4j.rootLogger=INFO, logfile

log4j.appender.appender=org.apache.log4j.ConsoleAppender
log4j.appender.appender.layout=org.apache.log4j.PatternLayout
log4j.appender.appender.layout.ConversionPattern=%d %p [%c] - <%m>%n

log4j.appender.logfile=org.apache.log4j.RollingFileAppender
log4j.appender.logfile.File=basic.log
log4j.appender.logfile.MaxFileSize=512KB
# Keep three backup files.
log4j.appender.logfile.MaxBackupIndex=3
# Pattern to output: date priority [category] - message
log4j.appender.logfile.layout=org.apache.log4j.PatternLayout
log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n
log4j.appender.logfile.layout.ConversionPattern=%d{yyyy-MM-dd}-%t-%-5p-%-10c:%m%n
----------------------------------------------------------
package com.cg.miniproject.controller;

import javax.validation.Valid;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import com.cg.miniproject.bean.User;
import com.cg.miniproject.exception.HotelException;
import com.cg.miniproject.service.IHotelBookingService;

@Controller
public class HotelBookingController {
	@Autowired
	IHotelBookingService service;

	@RequestMapping("index")
	public ModelAndView getHomePage() {
		ModelAndView view = new ModelAndView();
		view.setViewName("Home");
		return view;
	}

	@RequestMapping("login")
	public ModelAndView getLoginPage() {
		ModelAndView view = new ModelAndView("Login", "user", new User());
		return view;
	}

	@RequestMapping("register")
	public ModelAndView getRegisterPage() {
		ModelAndView view = new ModelAndView("Login", "user", new User());
		return view;
	}

	@RequestMapping("logindetails")
	public ModelAndView getLoginDetails(
			@Valid @ModelAttribute("user") User user, BindingResult result)
			throws HotelException {
		ModelAndView view = new ModelAndView();
		if (result.hasErrors()) {
			view.setViewName("Login");
		} else {
			boolean res = service.login(user);
			if (res)
				view.setViewName("ListOfHotels");
			else {
				view.setViewName("Login");
				String msg = "Enter valid credentials!";
				view.addObject("msg", msg);
			}
		}
		return view;
	}
}
